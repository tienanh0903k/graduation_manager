<!-- BREADCRUMB -->
<nav class="breadcrumb">
    <span>Trang chủ</span>
    <span>/</span>
    <span>Đề xuất đề tài</span>
</nav>

<p-panel header="Tìm kiếm đề tài" [toggleable]="true">
    <div class="search-bar">
        <p-dropdown [options]="departments" [(ngModel)]="selectedDepartment" placeholder="Mã Bộ môn"></p-dropdown>
        <input type="text" pInputText placeholder="Tên đề tài" [(ngModel)]="searchTitle" />
        <p-dropdown [options]="lecturers" [(ngModel)]="selectedLecturer" placeholder="Tên giảng viên"></p-dropdown>
        <button pButton type="button" (click)="filterTopics()">Tìm kiếm</button>
    </div>
</p-panel>
<!-- BUTTON ĐỀ XUẤT -->
<div class="propose-wrapper" style="margin-bottom: 1rem;">
    <button pButton type="button" icon="pi pi-plus" label="Đề xuất đề tài" class="p-button-success"
        (click)="openProposeDialog()"></button>
</div>

<p-table [value]="topics" [paginator]="true" [rows]="10" responsiveLayout="scroll"
        [tableStyle]="{ 'min-width': '50rem' }">


        <ng-template pTemplate="header">
            <tr>
                <th>STT</th>
                <th>Tên đề tài</th>
                <th>Tên giảng viên</th>
                <th>Mô tả</th>
                <th>Tác vụ</th>
                <th>Trạng thái</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-topic let-i="rowIndex">
            <tr>
                <td>{{ i + 1 }}</td>
                <td>{{ topic.title }}</td>
                <td>{{ topic.lecturer }}</td>
                <td>{{ topic.description }}</td>
                <td>
                    <button pButton icon="pi pi-eye" class="p-button-text"></button>
                </td>
                <td>
                    <span class="p-tag" [ngClass]="{
          'p-tag-success': topic.status === 'Đã được duyệt',
          'p-tag-warning': topic.status === 'Chờ duyệt'
        }">
                        {{ topic.status }}
                    </span>
                </td>
            </tr>
        </ng-template>


    </p-table>

<!-- DIALOG TẠO ĐỀ TÀI MỚI -->
<p-dialog header="Đề xuất đề tài mới" [(visible)]="isDialogVisible" [modal]="true" [style]="{ width: '600px' }"
    (onHide)="closeProposeDialog()">
    <form class="p-fluid" (ngSubmit)="submitProposal()">
        <div class="p-field">
            <label for="title">Tên đề tài</label>
            <input id="title" type="text" pInputText [(ngModel)]="form.title" name="title" required />
        </div>

        <div class="p-field">
            <label for="description">Mô tả</label>
            <textarea id="description" pInputTextarea rows="3" [(ngModel)]="form.description"
                name="description"></textarea>
        </div>

        <!-- <p-dropdown [options]="teacherOptions" [(ngModel)]="form.teacherId" name="teacherId"
            placeholder="Chọn giảng viên"></p-dropdown> -->


        <div class="p-dialog-footer">
            <button pButton type="button" label="Hủy" class="p-button-text" (click)="closeProposeDialog()"></button>
            <button pButton type="submit" label="Lưu" class="p-button-success"></button>
        </div>
    </form>
</p-dialog>

<p-toast></p-toast>
