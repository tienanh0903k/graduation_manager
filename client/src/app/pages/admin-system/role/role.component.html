
<nav class="breadcrumb">
    <span>Trang chủ</span>
    <span>/</span>
    <span>Quản lý quyền</span>
</nav>


<p-panel header="Quản lý quyền Menu theo Role" styleClass="mb-3">
  <p-table [value]="roles">
    <ng-template pTemplate="header">
      <tr>
        <th>STT</th>
        <th>Tên Role</th>
        <th>Hành động</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-role let-i="rowIndex">
      <tr>
        <td>{{ i + 1 }}</td>
        <td>{{ role.name }}</td>
        <td>
          <button pButton label="Gán Menu" icon="pi pi-pencil" class="p-button-sm"
                  (click)="openRoleMenuDialog(role)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-panel>

<p-dialog header="Gán menu cho role" [(visible)]="isRoleDialogVisible" [modal]="true" [style]="{ width: '800px' }">
  <div *ngIf="selectedRole">
    <h4>Vai trò: {{ selectedRole.name }}</h4>

    <p-pickList [source]="unassignedMenus"
                [target]="assignedMenus"
                sourceHeader="Menu khả dụng"
                targetHeader="Menu đã gán"
                dragdrop="true"
                [responsive]="true"
                [style]="{ height: '300px' }">
      <ng-template let-item pTemplate="item">
        <div>{{ item.label }}</div>
      </ng-template>
    </p-pickList>

    <div class="p-dialog-footer mt-3">
      <button pButton label="Hủy" class="p-button-text" (click)="isRoleDialogVisible = false"></button>
      <button pButton label="Lưu" class="p-button-success" (click)="saveRoleMenus()"></button>
    </div>
  </div>
</p-dialog>

<p-toast></p-toast>
