DÆ°á»›i Ä‘Ã¢y lÃ  tá»•ng há»£p táº¥t cáº£ cÃ¡c má»‘i quan há»‡ trong Hibernate (JPA) mÃ  báº¡n cáº§n náº¯m rÃµ Ä‘á»ƒ lÃ m chá»§ viá»‡c thiáº¿t káº¿ cÆ¡ sá»Ÿ dá»¯ liá»‡u kiá»ƒu code-first:
âœ… 1. @OneToOne â€“ Má»™t-Ä‘á»‘i-má»™t
ğŸ§  Ã nghÄ©a:

    Má»™t Ä‘á»‘i tÆ°á»£ng A chá»‰ liÃªn káº¿t vá»›i duy nháº¥t má»™t Ä‘á»‘i tÆ°á»£ng B.

ğŸ“Œ VÃ­ dá»¥:

@Entity
public class User {
    @OneToOne
    @JoinColumn(name = "profile_id")
    private Profile profile;
}

User	Profile
id = 1	id = 1
profile_id = 1	...

    ğŸ” 1 User â†” 1 Profile

âœ… 2. @OneToMany / @ManyToOne â€“ Má»™t-Ä‘á»‘i-nhiá»u (vÃ  ngÆ°á»£c láº¡i)
ğŸ§  Ã nghÄ©a:

    Má»™t A cÃ³ thá»ƒ cÃ³ nhiá»u B (OneToMany)

    Má»™t B chá»‰ thuá»™c vá» má»™t A (ManyToOne)

ğŸ“Œ VÃ­ dá»¥:

@Entity
public class Department {
    @OneToMany(mappedBy = "department")
    private List<Employee> employees;
}

@Entity
public class Employee {
    @ManyToOne
    @JoinColumn(name = "department_id")
    private Department department;
}

Department	Employee
id = 1	id = 101
name = HR	department_id = 1

    ğŸ” 1 phÃ²ng ban â†” nhiá»u nhÃ¢n viÃªn

âœ… 3. @ManyToMany â€“ Nhiá»u-Ä‘á»‘i-nhiá»u
ğŸ§  Ã nghÄ©a:

    Má»™t A liÃªn káº¿t nhiá»u B, vÃ  ngÆ°á»£c láº¡i.

ğŸ“Œ VÃ­ dá»¥:

@Entity
public class Student {
    @ManyToMany
    @JoinTable(name = "student_course",
        joinColumns = @JoinColumn(name = "student_id"),
        inverseJoinColumns = @JoinColumn(name = "course_id"))
    private List<Course> courses;
}

student_course
student_id
1
1
2

    ğŸ” 1 sinh viÃªn há»c nhiá»u mÃ´n vÃ  má»—i mÃ´n cÃ³ nhiá»u sinh viÃªn

âœ… 4. @Self-reference â€“ Quan há»‡ vá»›i chÃ­nh nÃ³
ğŸ“Œ DÃ¹ng cho menu, category cha â€“ con:

@Entity
public class MenuItem {
    @ManyToOne
    @JoinColumn(name = "parent_id")
    private MenuItem parent;

    @OneToMany(mappedBy = "parent")
    private List<MenuItem> children;
}

    â›“ Quan há»‡ Ä‘á»‡ quy â€” dÃ¹ng Ä‘á»ƒ váº½ cÃ¢y phÃ¢n cáº¥p

âœ… 5. CascadeType & FetchType
Thuá»™c tÃ­nh	Ã nghÄ©a
CascadeType.ALL	Tá»± Ä‘á»™ng Ã¡p dá»¥ng hÃ nh Ä‘á»™ng (save, delete...) tá»« cha xuá»‘ng con
FetchType.LAZY	Chá»‰ láº¥y dá»¯ liá»‡u khi cáº§n thiáº¿t â†’ tiáº¿t kiá»‡m performance
FetchType.EAGER	LuÃ´n láº¥y Ä‘áº§y Ä‘á»§ dá»¯ liá»‡u liÃªn quan â†’ dá»… gÃ¢y overload

@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
private List<MenuItem> children;

ğŸ§  TÃ³m táº¯t dá»… nhá»›
Quan há»‡	Annotation	Äáº·c Ä‘iá»ƒm chÃ­nh
1â€“1	@OneToOne	DÃ¹ng cho Profile, Setting
1â€“N / Nâ€“1	@OneToMany / @ManyToOne	DÃ¹ng cho PhÃ²ng ban â€“ NhÃ¢n viÃªn
Nâ€“N	@ManyToMany	DÃ¹ng cho Sinh viÃªn â€“ MÃ´n há»c
Äá»‡ quy	@ManyToOne + @OneToMany	DÃ¹ng cho Menu, Danh má»¥c cha â€“ con

Náº¿u báº¡n cáº§n so sÃ¡nh trá»±c quan báº±ng sÆ¡ Ä‘á»“ ERD hoáº·c code vÃ­ dá»¥ theo tá»«ng loáº¡i, chá»‰ cáº§n nÃ³i:

    "Váº½ sÆ¡ Ä‘á»“ cho 1â€“N + Nâ€“N"
    MÃ¬nh sáº½ gá»­i ngay báº£ng + sÆ¡ Ä‘á»“.

Muá»‘n mÃ¬nh táº¡o demo tá»«ng quan há»‡ báº±ng Spring Boot vÃ  H2? CÅ©ng gáº­t Ä‘áº§u 1 cÃ¡i ğŸ˜